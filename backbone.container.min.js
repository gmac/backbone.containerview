// Backbone.ContainerView 0.0.0
// (c) 2014 Greg MacWilliam
// Freely distributed under the MIT license

!function(a,b){"undefined"!=typeof exports?module.exports=b(require("backbone"),require("underscore")):"function"==typeof define&&define.amd?define(["backbone","underscore"],b):b(a.Backbone,a._)}(this,function(a,b){function c(b,c){if(b instanceof a.View)return!0;if(c)throw"Not a View instance";return!1}function d(a,b){return b?b instanceof e?b:a.$(b):a.$el}var e=a.$,f=a.View.prototype,g="*",h=a.ContainerView=a.View.extend({contentView:null,contentModels:null,_sv:function(a){return a&&b.isArray(a)&&(this.__sv=a),this.__sv||(this.__sv=[]),this.__sv},addSubview:function(a){a=b.isArray(a)?a:Array.prototype.slice.call(arguments);var d=b.filter(a,function(a){return c(a,!0)&&a!==this?(this._sv().push(a),!0):void 0},this);return d.length?1==d.length?d[0]:d:this},releaseSubviews:function(a,d){d=d||{};var e=a,f=this._sv(),h=f,i=d.remove;return e===g?(i&&b.invoke(f,"remove"),h.length=0):c(a)?(i&&a.remove(),h=b.without(f,a)):h=b.reject(f,function(a){return a.$el.is(e)?(i&&a.remove(),!0):void 0}),this._sv(h),this},removeSubviews:function(a,b){return b=b||{},b.remove=!0,this.releaseSubviews(a,b)},numSubviews:function(){return this._sv().length},createContainer:function(a){var b=d(this,a);return b.is(this.$el)?this:this.addSubview(h.create(b))},contentFilter:function(){return!0},contentSort:null,render:function(){this.renderContent()},renderContent:function(){var a=[],d=this.contentView,e=this.contentModels,f=document.createDocumentFragment();return b.isFunction(d)&&b.isArray(e)?(b.isFunction(this.contentSort)&&(e=e.slice(),e.sort(b.bind(this.contentSort,this))),b.each(e,function(b,c){if(this.contentFilter(b,c)){var e=new d({model:b});a.push(e),e.render(),f.appendChild(e.el)}},this)):c(d)&&(d.render(),a.push(d),f.appendChild(d.el)),this.$el.html(f),this.removeSubviews(g),this._sv(a),this},open:function(d,e){return e instanceof a.Collection?e=e.models:e instanceof a.Model&&(e=[e]),this.contentModels=b.isArray(e)?e:null,this.contentView=b.isFunction(d)||c(d,!0)?d:null,this.renderContent()},close:function(){return this.$el.empty(),this.removeSubviews(g),this.contentView=this.contentModels=null,this},append:function(a,b){return a=this.addSubview(a),a.render(),d(this,b).append(a.$el),this},swapIn:function(a,b){return b?(a=this.addSubview(a),a.render(),d(this,b).replaceWith(a.$el),this):this.append(a,b)},remove:function(){var a=f.remove.apply(this,arguments);return this.close(),a}},{create:function(a){return new h({el:a})},install:function(c){a.View.prototype=c!==!1?b.extend({},f,h.prototype):f}});return h});
//# sourceMappingURL=backbone.container.min.map